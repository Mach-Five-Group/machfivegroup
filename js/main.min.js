gsap.registerPlugin(ScrollTrigger,ScrollToPlugin),document.addEventListener("DOMContentLoaded",function(){const f=document.querySelectorAll('.nav__link[href^="#"]');f.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("href"),t=document.querySelector(n);t&&gsap.to(window,{duration:1,scrollTo:{y:t.offsetTop-80,autoKill:!1},ease:"power2.out"})})});const v=document.querySelectorAll(".nav__dropdown-toggle");v.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.closest(".nav__dropdown");window.innerWidth<=900&&t.classList.toggle("active")})});const t=document.querySelector(".nav__toggle"),n=document.querySelector(".nav__menu");if(t&&n){t.addEventListener("click",function(){t.classList.toggle("nav__toggle--open"),n.classList.toggle("nav__menu--open"),document.body.classList.toggle("menu-open")}),document.addEventListener("click",function(e){n.classList.contains("nav__menu--open")&&(!n.contains(e.target)&&!t.contains(e.target)&&(t.classList.remove("nav__toggle--open"),n.classList.remove("nav__menu--open"),document.body.classList.remove("menu-open")),e.target.classList.contains("nav__link")&&!e.target.classList.contains("nav__dropdown-toggle")&&(t.classList.remove("nav__toggle--open"),n.classList.remove("nav__menu--open"),document.body.classList.remove("menu-open")))});const e=new MutationObserver(function(e){e.forEach(function(e){e.type==="attributes"&&e.attributeName==="class"&&(document.body.classList.contains("menu-open")?document.body.style.overflow="hidden":document.body.style.overflow="")})});e.observe(document.body,{attributes:!0})}const l=document.querySelector(".nav"),c=document.getElementById("scrollProgress");let i=!1;function d(){const e=window.scrollY;if(e>50?l.classList.add("nav--scrolled"):l.classList.remove("nav--scrolled"),c){const t=document.documentElement.scrollHeight-window.innerHeight,n=e/t;c.style.transform=`scaleX(${n})`}i=!1}function u(){i||(requestAnimationFrame(d),i=!0)}window.addEventListener("scroll",u,{passive:!0});const r=document.querySelector(".hero-background"),h=document.querySelector(".hero-overlay"),m=document.querySelector(".hero__content");r&&(gsap.to(r,{yPercent:-15,ease:"none",force3D:!0,scrollTrigger:{trigger:".hero",start:"top bottom",end:"bottom top",scrub:.5,invalidateOnRefresh:!0}}),gsap.to(h,{yPercent:-20,ease:"none",force3D:!0,scrollTrigger:{trigger:".hero",start:"top bottom",end:"bottom top",scrub:.5,invalidateOnRefresh:!0}}),gsap.to(m,{yPercent:-10,ease:"none",force3D:!0,scrollTrigger:{trigger:".hero",start:"top bottom",end:"bottom top",scrub:.5,invalidateOnRefresh:!0}})),gsap.fromTo(".about-section__content h3",{opacity:0,y:20},{opacity:1,y:0,duration:.6,force3D:!0,stagger:.2,ease:"power2.out",scrollTrigger:{trigger:"#about",start:"top 80%",once:!0}}),gsap.fromTo(".brand-card-clean .brand-logo",{opacity:0,x:-50},{opacity:1,x:0,duration:.8,force3D:!0,stagger:.2,ease:"power2.out",scrollTrigger:{trigger:"#brands",start:"top 80%",once:!0}}),gsap.fromTo(".brand-card-clean .brand-name",{opacity:0,x:50},{opacity:1,x:0,duration:.8,force3D:!0,stagger:.2,delay:.2,ease:"power2.out",scrollTrigger:{trigger:"#brands",start:"top 80%",once:!0}}),gsap.fromTo(".tool-card-clean .tool-logo",{opacity:0,x:-50},{opacity:1,x:0,duration:.8,force3D:!0,stagger:.2,ease:"power2.out",scrollTrigger:{trigger:"#tools",start:"top 80%",once:!0}}),gsap.fromTo(".tool-card-clean .tool-name",{opacity:0,x:50},{opacity:1,x:0,duration:.8,force3D:!0,stagger:.2,delay:.2,ease:"power2.out",scrollTrigger:{trigger:"#tools",start:"top 80%",once:!0}}),gsap.fromTo(".engagement-detail",{opacity:0,y:40,scale:.95},{opacity:1,y:0,scale:1,duration:.6,force3D:!0,stagger:.15,ease:"power2.out",scrollTrigger:{trigger:"#engagement",start:"top 80%",once:!0}}),gsap.fromTo(".metric-card",{opacity:0,y:40,scale:.95},{opacity:1,y:0,scale:1,duration:.6,force3D:!0,stagger:.1,ease:"power2.out",scrollTrigger:{trigger:".engagement-metrics",start:"top 80%",once:!0}}),gsap.fromTo(".about-section__content",{opacity:0,y:30},{opacity:1,y:0,duration:.8,force3D:!0,stagger:.2,ease:"power2.out",scrollTrigger:{trigger:"#about",start:"top 75%",once:!0}}),gsap.fromTo(".forward-text",{x:-100,opacity:0},{x:0,opacity:1,duration:.6,force3D:!0,ease:"power2.out",scrollTrigger:{trigger:".contact",start:"top 70%",once:!0}});const a=document.querySelectorAll(".hero__title-line");a.length>0&&gsap.fromTo(a,{opacity:0,y:100,rotationX:90},{opacity:1,y:0,rotationX:0,duration:1.2,force3D:!0,stagger:.3,ease:"power3.out",delay:.5}),gsap.fromTo(".subbrand-logo",{opacity:0,y:20},{opacity:.9,y:0,duration:.8,stagger:.15,ease:"power2.out",delay:1.5}),gsap.fromTo(".timeline-stage",{opacity:0,y:50,scale:.8},{opacity:1,y:0,scale:1,duration:.6,force3D:!0,stagger:.15,ease:"back.out(1.7)",scrollTrigger:{trigger:".timeline",start:"top 80%",once:!0}});const p=document.querySelectorAll(".metric-value");ScrollTrigger.create({trigger:".engagement-metrics",start:"top 80%",once:!0,onEnter:()=>{p.forEach(e=>{const t=e.textContent,n=/^\d+/.test(t);if(n){const s=parseInt(t),n={value:0};gsap.to(n,{value:s,duration:1.5,ease:"power2.out",onUpdate:function(){e.textContent=Math.round(n.value)+t.replace(/^\d+/,"")}})}else if(t.includes("-")){const[s,o]=t.split("-").map(e=>parseInt(e.trim())),n={start:0,end:0};gsap.to(n,{start:s,end:o,duration:1.5,ease:"power2.out",onUpdate:function(){e.textContent=Math.round(n.start)+"-"+Math.round(n.end)}})}})}});const g=document.querySelectorAll(".brand-card__logo");g.forEach((e)=>{const s=e.querySelector(".brand-card__logo-text"),n=e.querySelector(".brand-card__logo-mark");e.addEventListener("click",()=>{gsap.to(e,{scale:.95,duration:.1,force3D:!0,yoyo:!0,repeat:1,ease:"power2.out"}),gsap.to(n,{rotationZ:"+=360",duration:.8,force3D:!0,ease:"back.out(1.7)"})}),e.addEventListener("mouseenter",()=>{gsap.to(s,{letterSpacing:"0.02em",duration:.3,ease:"power2.out"}),gsap.to(n,{y:-2,duration:.3,force3D:!0,ease:"back.out(1.7)"})}),e.addEventListener("mouseleave",()=>{gsap.to(s,{letterSpacing:"0em",duration:.3,ease:"power2.out"}),gsap.to(n,{y:0,duration:.3,force3D:!0,ease:"power2.out"})})});const e=document.querySelector(".tools__grid"),o=document.querySelector(".tools__nav--prev"),s=document.querySelector(".tools__nav--next");if(e&&o&&s){const t=344;o.addEventListener("click",()=>{e.scrollBy({left:-t,behavior:"smooth"})}),s.addEventListener("click",()=>{e.scrollBy({left:t,behavior:"smooth"})});const n=()=>{const t=e.scrollLeft,n=e.scrollWidth-e.clientWidth;o.style.opacity=t<=0?"0.3":"1",o.style.pointerEvents=t<=0?"none":"auto",s.style.opacity=t>=n-5?"0.3":"1",s.style.pointerEvents=t>=n-5?"none":"auto"};e.addEventListener("scroll",n),n()}})